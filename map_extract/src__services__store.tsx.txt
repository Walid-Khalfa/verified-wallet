import React, { createContext, useContext, useState } from "react";

interface VaultStore {
  chainId: number | null;
  pk: string | null;
  address: string | null;
  signer: any;
  provider: any;
  vaultContract: any;
  vaultData: any;
  setChainId: (chainId: number | null) => void;
  setPk: (pk: string | null) => void;
  setAddress: (address: string | null) => void;
  setSigner: (signer: any) => void;
  setProvider: (provider: any) => void;
  setVaultContract: (vaultContract: any) => void;
  setVaultData: (vaultData: any) => void;
}

const VaultStoreContext = createContext<VaultStore | undefined>(undefined);

export const VaultContextProvider = ({ children }: { children: any }) => {
  const [chainId, setChainId] = useState<number | null>(null);
  const [pk, setPk] = useState<string | null>(null);
  const [address, setAddress] = useState<string | null>(null);
  const [signer, setSigner] = useState<any>(null);
  const [provider, setProvider] = useState<any>(null);
  const [vaultContract, setVaultContract] = useState<any>(null);
  const [vaultData, setVaultData] = useState<any>(null);

  return (
    <VaultStoreContext.Provider
      value={{
        chainId,
        pk,
        address,
        signer,
        provider,
        vaultContract,
        vaultData,
        setChainId,
        setPk,
        setAddress,
        setSigner,
        setProvider,
        setVaultContract,
        setVaultData,
      }}
    >
      {children}
    </VaultStoreContext.Provider>
  );
};

export const useVaultStore = () => {
  const context = useContext(VaultStoreContext);
  if (!context) {
    throw new Error("useVaultStore must be used within VaultContextProvider");
  }
  return context;
};
